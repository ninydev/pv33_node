### Крок 7: Перегляд та редагування — Динамічні маршрути та Server Actions

У цьому кроці ми завершили перенесення основних функцій управління користувачами, реалізувавши перегляд деталей та редагування.

#### 1. Динамічні маршрути (Dynamic Routes)
У Next.js для сторінок, які залежать від ID, ми використовуємо структуру папок з квадратними дужками:
- `src/app/users/[id]/page.tsx` — для перегляду деталей.
- `src/app/users/[id]/edit/page.tsx` — для форми редагування.

**Як це працює:**
Next.js автоматично передає параметр `id` у пропси серверного компонента `params`. Ми використовуємо цей ID для завантаження даних користувача прямо на сервері за допомогою `fetchUserById`.

#### 2. Перевикористання компонентів (Refactoring)
Ми зробили компонент `UserForm` універсальним. Тепер він:
- Приймає `initialData` (для редагування) або використовує значення за замовчуванням (для створення).
- Приймає `action` як пропс, що дозволяє використовувати одну форму для різних серверних дій (`createUserAction` або `updateUserAction`).

#### 3. Прив'язка аргументів (Action Binding)
Для редагування та видалення нам потрібно передати ID користувача в Server Action. Ми використали метод `.bind()`:
```typescript
const updateActionWithId = updateUserAction.bind(null, id);
```
Це створює нову функцію, яка при виклику автоматично додасть `id` як перший аргумент. Це безпечний та рекомендований спосіб передачі параметрів у серверні екшени.

#### 4. Обробка видалення
Ми додали можливість видалення користувача прямо зі списку або зі сторінки деталей. Використання форми з `action` дозволяє видаляти дані без написання клієнтських обробників `onClick` та ручного виклику `fetch`.

#### Порівняння підходів

| Характеристика | React (Client-Side) | Next.js (App Router) |
| :--- | :--- | :--- |
| **Роутинг** | React Router (`:id`) | Файлова система (`[id]`) |
| **Завантаження даних** | `useEffect` + `useState` | Прямий `await` у компоненті |
| **Форми** | Керовані компоненти (`value`, `onChange`) | Некеровані форми + Server Actions |
| **Навігація після дії** | `navigate('/path')` | `redirect('/path')` у серверному екшені |
| **Оновлення даних** | Ручне оновлення стейту | `revalidatePath` на сервері |

#### Підсумок міграції
Тепер наш додаток на Next.js повністю функціональний:
1. Список з серверною пагінацією.
2. Створення з валідацією Zod.
3. Перегляд деталей з серверним рендерингом.
4. Редагування через універсальну форму.
5. Видалення з автоматичним оновленням кешу.

---
**Вітаємо!** Ви успішно пройшли шлях від клієнтського React-додатка до сучасного Next.js проекту з використанням Server Components та Server Actions.
