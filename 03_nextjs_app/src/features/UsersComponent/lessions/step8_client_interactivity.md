### Крок 8: Інтерактивність та Client Components

У цьому кроці ми зіткнулися з важливою особливістю Next.js: обмеженням використання обробників подій у Server Components.

#### 1. Проблема: Помилка Runtime
При спробі додати підтвердження видалення (`confirm`) через `onSubmit` у формі, ми отримали помилку:
`Event handlers cannot be passed to Client Component props.`

Це сталося тому, що:
- За замовчуванням усі компоненти в Next.js є **Server Components**.
- Server Components виконуються на сервері, де немає об'єкта `window`, подій `click`, `submit` тощо.
- Атрибут `onSubmit` — це функція, яка має виконатися в браузері.
- В React 19, коли ви додаєте `onSubmit` до стандартного тегу `form`, React намагається перетворити його на клієнтський компонент, але Server Component не може передати функцію (обробник) клієнтському компоненту через серіалізацію.

#### 2. Рішення: Директива `'use client'`
Для того, щоб додати інтерактивність (обробку подій, хуки `useState`, `useEffect` або браузерні API як `confirm`), ми повинні явно позначити компонент як клієнтський.

Ми додали `'use client';` на початку файлів:
- `src/features/UsersComponent/ui/UsersList.tsx`
- `src/features/UsersComponent/ui/UserDetails.tsx`

#### 3. Як це працює тепер?
1. **Server Page:** Сторінка (наприклад, `users/page/[page]/page.tsx`) залишається серверною. Вона отримує дані з API на сервері.
2. **Props Passing:** Серверна сторінка передає масив `users` у клієнтський компонент `UsersList`. Це безпечно, оскільки дані можна серіалізувати в JSON.
3. **Hydration:** Браузер завантажує код клієнтського компонента та "оживляє" його, додаючи обробники подій.
4. **Server Actions:** Навіть у клієнтському компоненті ми можемо використовувати **Server Actions** (`deleteUserAction`). Next.js автоматично створює HTTP-запит до сервера при виклику цієї функції.

#### Порівняння підходів

| Характеристика | Server Component | Client Component |
| :--- | :--- | :--- |
| **Виконання** | Тільки на сервері | На сервері (SSR) + Гідрація в браузері |
| **Доступ до API** | Прямий (БД, файлова система) | Тільки через HTTP/Server Actions |
| **Інтерактивність** | Відсутня (немає `onClick`, `onSubmit`) | Повна (можна використовувати всі події) |
| **Хуки** | Неможливо (`useState` тощо) | Можливо |

#### Висновок
Використовуйте Server Components для отримання даних та відображення статичного контенту. Переходьте до Client Components тільки тоді, коли вам потрібна інтерактивність або специфічні браузерні API.
